<div dDropDown trigger="hover" (toggleEvent)="onToggle($event)" appendToBody>
  <!-- 按钮 -->
  <button mat-icon-button dDropDownToggle>
    <ng-container *ngTemplateOutlet="flagImage; context: { $implicit: activeLang }" />
  </button>

  <!-- 语言菜单 -->
  <ul dDropDownMenu #schemes class="devui-dropdown-menu devui-scrollbar" role="menu">
    @for (lang of availableLangs; track lang.id) {
      <li role="menuitem" (click)="setActiveLang(lang.id)">
        <a dDropDownMenuItem>
          <span class="flex items-center">
            <ng-container *ngTemplateOutlet="flagImage; context: { $implicit: lang.id }" />
            <span class="ml-3 dark:text-white">{{ lang.label }}</span>
          </span>
        </a>
      </li>
    }
  </ul>
</div>

<!-- 国旗图片模板 -->
<ng-template let-lang #flagImage>
  <span class="relative w-6 overflow-hidden rounded-sm shadow">
    <span class="absolute inset-0 ring-1 ring-inset ring-black ring-opacity-10"></span>
    <img
      class="w-full"
      [src]="'assets/images/flags/' + flagCodes[lang].toUpperCase() + '.svg'"
      [alt]="'Flag image for ' + lang" />
  </span>
</ng-template>
